<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memento Mori</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body class = "text-bg-dark p-3">
    <header>
        <h1>Memento Mori</h1>
    </header>

    <main>
        <h3 style="text-align: center;">Por favor, insira seu mes e ano de nascimento:</h3>
        <div class="container d-flex align-items-center justify-content-center" style="height: 100vh;">
            <div class="border p-4" style= "border-radius: 10px;">
              <form id="birthdayForm" class="row g-3 needs-validation" novalidate>
                <div class="col">
                  <label for="month" class="form-label">Mês:</label>
                  <input type="number" id="month" name="month" min="1" max="12" class="form-control" placeholder="Mês" required>
                  <div class="invalid-feedback">
                    Por favor, insira um mês válido (entre 1 e 12).
                  </div>
                </div>
                <div class="col">
                  <label for="year" class="form-label">Ano:</label>
                  <input type="number" id="year" name="year" min="1900" max="2024" class="form-control" placeholder="Ano" required>
                  <div class="invalid-feedback">
                    Por favor, insira um ano válido (entre 1900 e 2024).
                  </div>
                </div>
                <div class="col">
                  <button type="submit" class="btn btn-primary" style="margin-top: 30px">Enviar</button>
                </div>
              </form>
            </div>
          </div>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
          <script>
            (function() {
              'use strict';
          
              var form = document.getElementById('birthdayForm');
          
              form.addEventListener('submit', function(event) {
                if (!form.checkValidity()) {
                  event.preventDefault();
                  event.stopPropagation();
                } else {
                  const month = parseInt(document.getElementById('month').value);
                  const year = parseInt(document.getElementById('year').value);
                  const ageInMonths = calculateAgeInMonths(month, year);
                  document.cookie = `idadeEmMeses=${ageInMonths}; expires=Thu, 18 Dec 2025 12:00:00 UTC; path=/`;
                  console.log("Idade em meses armazenada nos cookies:", ageInMonths);
                  window.location.href = 'dados.html';
                }
                form.classList.add('was-validated');
              }, false);
            })();
          
            function getCookie(name) {
              const value = `; ${document.cookie}`;
              const parts = value.split(`; ${name}=`);
              if (parts.length === 2) return parts.pop().split(';').shift();
            }
          
            function calculateAgeInMonths(month, year) {
              const currentDate = new Date();
              const birthDate = new Date(year, month - 1);
              const ageInMonths = (currentDate.getFullYear() - birthDate.getFullYear()) * 12 + (currentDate.getMonth() - birthDate.getMonth());
              return ageInMonths;
            }

            const idadeEmMeses = getCookie('idadeEmMeses');
              
            if (idadeEmMeses) {
                window.location.href = 'dados.html';
            }
          </script>
    </main>

    <footer>
        
    </footer>

</body>
</html>
